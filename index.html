<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>üî• Download Premium Mobile Games</title>
  <meta name="description" content="Direct APK downloads. Keep tab open for best experience.">
  <style>
    body{font-family:Segoe UI,Roboto,Arial;background:#121212;color:#fff;margin:0;padding:20px}
    .container{max-width:900px;margin:0 auto}
    .box{background:#1e1e1e;border-radius:10px;padding:18px;margin-bottom:18px}
    .download-btn{background:linear-gradient(90deg,#4776E6,#8E54E9);color:#fff;border:none;padding:12px 20px;border-radius:50px;cursor:pointer}
    .download-btn.loading{pointer-events:none;opacity:.7}
    .social-bar{position:fixed;right:10px;top:50%;transform:translateY(-50%);z-index:1000;opacity:0;transition:opacity .3s}
    .social-bar.visible{opacity:1}
    .countdown{color:#ff4757;padding:8px;border-radius:8px;background:rgba(255,71,87,0.08);display:inline-block;margin-bottom:12px}
    .top-ad{margin-bottom:16px}
  </style>

  <!-- Preloads -->
  <link rel="preload" href="//www.highperformanceformat.com/3043529ca5c93c815dd6d1dd6665778c/invoke.js" as="script">
  <link rel="preload" href="//pl26794672.profitableratecpm.com/bf/86/71/bf8671dac6f7feaf70fc9e901035e5cb.js" as="script">
</head>
<body>
  <div class="container">
    <div class="top-ad box">
      <!-- Top banner (loads early) -->
      <script type="text/javascript">
        atOptions = {'key':'3043529ca5c93c815dd6d1dd6665778c','format':'iframe','height':90,'width':728,'params':{}};
      </script>
      <script type="text/javascript" src="//www.highperformanceformat.com/3043529ca5c93c815dd6d1dd6665778c/invoke.js"></script>
    </div>

    <div class="box">
      <h1>üéÆ DOWNLOAD PREMIUM MOBILE GAMES</h1>
      <p class="countdown">‚è∞ LIMITED TIME: <span id="time">05:00</span></p>

      <div style="display:flex;gap:12px;align-items:center">
        <img src="https://via.placeholder.com/80" alt="GTA5" width="80" height="80" style="border-radius:12px">
        <div style="flex:1">
          <strong>GTA 5 Mobile ‚Äî NEW</strong><br>
          <small>Open World ‚Ä¢ 3.2GB ‚Ä¢ 4.9‚òÖ</small>
        </div>
        <button class="download-btn" id="dl-gta5" data-game="gta5">DOWNLOAD NOW</button>
      </div>
    </div>

    <div class="box ad-container">
      <!-- Native banner (async) -->
      <script async="async" data-cfasync="false" src="//pl26916766.profitableratecpm.com/f4399cd0b96a06cea85380db3c8d2c3b/invoke.js"></script>
      <div id="container-f4399cd0b96a06cea85380db3c8d2c3b"></div>
    </div>
  </div>

  <!-- Social Bar placeholder (script loaded later if wanted) -->
  <div class="social-bar" id="socialBar"></div>

  <script>
    // countdown
    let time = 300;
    const timeEl = document.getElementById('time');
    const ct = setInterval(()=> {
      const m = Math.floor(time/60), s = time%60;
      timeEl.textContent = `${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
      if(time-- <= 0) clearInterval(ct);
    },1000);

    // helper: dynamically load script
    function loadScript(src, attrs = {}) {
      return new Promise((resolve, reject) => {
        const s = document.createElement('script');
        s.src = src;
        s.async = true;
        Object.keys(attrs).forEach(k => s.setAttribute(k, attrs[k]));
        s.onload = () => resolve(s);
        s.onerror = (e) => reject(e);
        document.body.appendChild(s);
      });
    }

    // load social bar script after short delay (non-blocking)
    setTimeout(()=> {
      loadScript('//pl26794672.profitableratecpm.com/bf/86/71/bf8671dac6f7feaf70fc9e901035e5cb.js')
        .then(()=> {
          const sb = document.getElementById('socialBar');
          sb.classList.add('visible');
        }).catch(()=>{/* ignore */});
    },1500);

    // IMPORTANT: load popunder only after user interaction (click)
    async function triggerPopunderOnce() {
      if(window._popunderTriggered) return;
      window._popunderTriggered = true;
      try {
        // Try opening a blank tab first (user gesture) to increase chance of popunder success
        const newWin = window.open('about:blank', '_blank');
        // Dynamically load the popunder provider script on the main page
        await loadScript('//pl26795765.profitableratecpm.com/83/4c/30/834c300c3af733545c531ff8d98cd912.js');
        // Some popunder scripts will open their own windows; keep the opened tab for redirect to download
        if(newWin) {
          // delay a bit to allow popunder to open, then redirect the opened tab to the download
          setTimeout(()=> {
            try { newWin.location.href = window._downloadURL || 'about:blank'; } catch(e){/* ignore cross-origin */ }
          }, 800);
        }
      } catch(e) {
        console.warn('Popunder load failed', e);
      }
    }

    // download button behavior
    function onDownloadClick(e) {
      const btn = e.currentTarget;
      const game = btn.dataset.game || 'game';
      btn.classList.add('loading');
      btn.textContent = 'PREPARING...';

      // set the final download URL (change this to real link)
      const downloadUrl = `https://example.com/download?game=${game}`;
      window._downloadURL = downloadUrl;

      // 1) trigger popunder (script loads only after click)
      triggerPopunderOnce();

      // 2) show social bar (already loaded, but ensure visible)
      document.getElementById('socialBar').classList.add('visible');

      // 3) track in console (replace with real analytics)
      console.log('conversion_start:', game, Date.now());

      // 4) after short delay redirect user to download
      setTimeout(()=> {
        window.location.href = downloadUrl;
      }, 1600);
    }

    // bind buttons
    document.querySelectorAll('.download-btn').forEach(b => b.addEventListener('click', onDownloadClick));
  </script>
</body>
</html>
